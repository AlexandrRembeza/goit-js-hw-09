{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAGeC,SAASC,cAAc,SAC/BC,iBAAiB,UAIxB,SAAqCC,GACnCA,EAAEC,iBACF,IAEmBC,EAAfF,EAAEG,cADJC,SAAYC,EAAMH,EAANG,OAAQC,EAAIJ,EAAJI,KAAMC,EAAKL,EAALK,MAG5B,GAAIF,EAAOG,MAAQ,GAAKF,EAAKE,MAAQ,GAAKD,EAAMC,MAAQ,EACtD,OAAOC,MAAO,qCAGY,IAAtBC,EAAa,GACF,IAAIC,SAASX,EAAEG,eAEvBS,SAAQ,SAACJ,EAAOK,G,OAAUH,EAAWG,GAAQC,OAAON,MAE7DR,EAAEG,cAAcY,QA6ClB,SAAuBC,G,IAAEX,EAAFW,EAAEX,OAAQE,EAAVS,EAAUT,MAAOD,EAAjBU,EAAiBV,KAClCW,EAAQ,EACRC,EAAYX,EAEhBY,YAAW,WACaC,KAAKC,SAAW,GAGpCC,QAAQC,QAAQ,uBAAqCC,OAAZP,EAAM,QAAgBO,OAAVN,EAAU,OAAKO,KAChEC,GAGJJ,QAAQK,OAAO,sBAAoCH,OAAZP,EAAM,QAAgBO,OAAVN,EAAU,OAAKU,MAC9DC,GAINX,GAAaZ,EACbW,GAAS,EAETa,EAAUC,aAAY,YAyC1B,SAAoBC,EAAcC,GAChC,GAAID,GAAgBC,EAClBC,cAAcJ,GA1CZK,CAAWlB,EAAOZ,GAEIe,KAAKC,SAAW,GAGpCC,QAAQC,QAAQ,uBAAqCC,OAAZP,EAAM,QAAgBO,OAAVN,EAAU,OAAKO,KAChEC,GAGJJ,QAAQK,OAAO,sBAAkCH,OAAZP,EAAM,QAAgBO,OAAVN,EAAU,OAAKU,MAC9DC,GAIJX,GAAaZ,EACbW,GAAS,IACRX,KACFC,GAjFH6B,CAAc1B,MAnBhB,IAAIoB,EAAU,KAuGd,SAASJ,EAAmBlB,GAC1B6B,EAAA1C,GAAS2C,OAAOC,QAAQ,GAASf,OAANhB,GAAS,CAClCgC,MAAO,QACPC,SAAU,YACVC,cAAc,EACdC,QAAS,QACTC,SAAU,SAId,SAASf,EAAkBrB,GACzB6B,EAAA1C,GAAS2C,OAAOO,QAAQ,GAASrB,OAANhB,GAAS,CAClCgC,MAAO,QACPC,SAAU,YACVC,cAAc,EACdC,QAAS,QACTC,SAAU,U","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport 'notiflix/dist/notiflix-3.2.5.min.css';\n\nconst formEL = document.querySelector('.form');\nformEL.addEventListener('submit', getFormValuesAndGetMessages);\n\nlet timerId = null;\n\nfunction getFormValuesAndGetMessages(e) {\n  e.preventDefault();\n  const {\n    elements: { amount, step, delay },\n  } = e.currentTarget;\n\n  if (amount.value < 0 || step.value < 0 || delay.value < 0) {\n    return alert(`Все числа должны быть больше нуля`);\n  }\n\n  const formValues = {};\n  const formData = new FormData(e.currentTarget);\n\n  formData.forEach((value, name) => (formValues[name] = Number(value)));\n\n  e.currentTarget.reset();\n\n  createPromise(formValues);\n}\n\n// function createPromise({ amount, delay, step }) {\n//   return setTimeout(() => {\n//     for (let i = 1; i <= amount; i += 1) {\n//       let shouldResolve = Math.random() > 0.3;\n\n//       if (shouldResolve) {\n//         Promise.resolve(`✅ Fulfilled promise ${i} in ${delay}ms`).then(\n//           value => {\n//             setTimeout(() => {\n//               Notiflix.Notify.success(`${value}`, {\n//                 width: '400px',\n//                 position: 'right-top',\n//                 clickToClose: true,\n//                 svgSize: '120px',\n//                 fontSize: '18px',\n//               });\n//             }, step);\n//           }\n//         );\n//       } else {\n//         Promise.reject(`❌ Rejected promise ${i} in ${delay}ms`).catch(\n//           value => {\n//             setTimeout(() => {\n//               Notiflix.Notify.failure(`${value}`, {\n//                 width: '400px',\n//                 position: 'right-top',\n//                 clickToClose: true,\n//                 svgSize: '120px',\n//                 fontSize: '18px',\n//               });\n//             }, step);\n//           }\n//         );\n//       }\n\n//       delay += step;\n//     }\n//   }, delay);\n// }\n\nfunction createPromise({ amount, delay, step }) {\n  let count = 1;\n  let timeDelay = delay;\n\n  setTimeout(() => {\n    const shouldResolve = Math.random() > 0.3;\n\n    if (shouldResolve) {\n      Promise.resolve(`✅ Fulfilled promise ${count} in ${timeDelay}ms`).then(\n        showResolveMessage\n      );\n    } else {\n      Promise.reject(`❌ Rejected promise ${count} in ${timeDelay}ms`).catch(\n        showRejectMessage\n      );\n    }\n\n    timeDelay += step;\n    count += 1;\n\n    timerId = setInterval(() => {\n      checkCount(count, amount);\n\n      const shouldResolve = Math.random() > 0.3;\n\n      if (shouldResolve) {\n        Promise.resolve(`✅ Fulfilled promise ${count} in ${timeDelay}ms`).then(\n          showResolveMessage\n        );\n      } else {\n        Promise.reject(`❌ Rejected promise ${count} in ${timeDelay}ms`).catch(\n          showRejectMessage\n        );\n      }\n\n      timeDelay += step;\n      count += 1;\n    }, step);\n  }, delay);\n}\n\nfunction showResolveMessage(value) {\n  Notiflix.Notify.success(`${value}`, {\n    width: '400px',\n    position: 'right-top',\n    clickToClose: true,\n    svgSize: '120px',\n    fontSize: '18px',\n  });\n}\n\nfunction showRejectMessage(value) {\n  Notiflix.Notify.failure(`${value}`, {\n    width: '400px',\n    position: 'right-top',\n    clickToClose: true,\n    svgSize: '120px',\n    fontSize: '18px',\n  });\n}\n\nfunction checkCount(currentCount, amountOfCounts) {\n  if (currentCount >= amountOfCounts) {\n    clearInterval(timerId);\n    return;\n  }\n}\n"],"names":["$iU1Pc","parcelRequire","document","querySelector","addEventListener","e","preventDefault","_elements","currentTarget","elements","amount","step","delay","value","alert","formValues","FormData","forEach","name","Number","reset","param","count","timeDelay","setTimeout","Math","random","Promise","resolve","concat","then","$ce04d3a99e08e73b$var$showResolveMessage","reject","catch","$ce04d3a99e08e73b$var$showRejectMessage","$ce04d3a99e08e73b$var$timerId","setInterval","currentCount","amountOfCounts","clearInterval","$ce04d3a99e08e73b$var$checkCount","$ce04d3a99e08e73b$var$createPromise","$parcel$interopDefault","Notify","success","width","position","clickToClose","svgSize","fontSize","failure"],"version":3,"file":"03-promises.baccc8cc.js.map"}